# Exmaple configuration file for pimd, the original PIM-SM router
#
# See the pimd(8) man page for details on all the settings.  This file
# only gives very brief examples and is intended as a quick start.
#
# NOTE: The order of the settings matter!
#
##
# default_source_preference <preference>
# default_source_metric <metric>
# hello_interval <SEC>
#
# igmp_query_interval  <SEC>
# igmp_querier_timeout <SEC>
#
# phyint <local-addr | ifname> [disable | enable]
#                              [igmpv2  | igmpv3]
#                              [threshold <t>] [preference <p>] [metric <m>]
#                              [altnet <net-addr>[/<masklen> | masklen <masklen>]
#                              [scoped <net-addr>|/<masklen> | masklen <masklen>]
#
# rp-candidate [local-addr | ifname] [priority <number> ] [time <number>]
# bsr-candidate [local-addr | ifname] [priority <number>]
# rp-address <address> [<group>[/<masklen> | masklen <masklen>]
#
# group-prefix <group-addr>[/<masklen> | masklen <masklen>]
# group-prefix <group-addr>[/<masklen> | masklen <masklen>]
# .
# .
# group-prefix <group-addr>[/<masklen> | masklen <masklen>]
#
# spt_threshold [rate <KBPS> | packets <NUM> | infinity] [interval <SEC>]
#
#
# By default PIM will be activated on all interfaces.  Use phyint with
# `disable` on interfaces where PIM should not be run.  You can also use
# the `-N, --disable-vifs` command line option along with `enable` to
# get the complete inverse behavior.
#
# Preferences (today more commonly known as admin distance) are used by
# PIM assert elections to determine upstream routers.  Currently pimd
# cannot reliably obtain preference and metric from the unicast routing
# protocols, so a default preference may need to be configured per
# interface, or a global default.  In a PIM assert election the router
# advertising the lowest assert preference will be selected as the
# forwarder and upstream router for the LAN.  An admin distance of 101
# should be sufficiently high so that asserts from Cisco or GateD
# routers are prefered over poor-little pimd.
#
# It is reccommended that preferences (admin distance) be set such that
# metrics are never consulted.  However, default metrics may also be set
# and will default to 1024.
#
# A `phyint` directive can use either the interface name or the IP
# address.  The `preference` and `metric` settings define administrative
# distance and metric, respectively, for PIM Assert messages sent on
# that interface.  Usually you do not need this, but if you do, think of
# them like distance and metric defined on an inbound interface (iif),
# but used by PIM Asserts on the outbound interfaces (oifs).
#
# If you want to add "alternative (sub)net" to a physical interface,
# e.g., if you want to make incoming traffic with a non-local source address
# to appear as it is coming from a local subnet, then use the command:
#   phyint <local-addr | ifname> altnet <net-addr> masklen <len>
# XXX: if you use this command, make sure you know what you are doing!!
#
# If you want administrative scoped multicast filtering, use the
# following command:
#
#   phyint <local-addr | ifname> scoped <net-addr> masklen <masklen>
#
# This allows interfaces to be configured as an administrative boundary
# for the specified scoped address. Packets belonging to the scoped
# address will not be forwarded. To use this compile with -DSCOPED_ACL
# option (in Makefile).
#
# The optional `local-addr` or `ifname` arguments after the "rp-candidate"
# and "bsr-candidate" settings specifies the local address to be used in
# the Cand-RP and Cand-BSR messages.  In case `ifname` is given as
# argument, the IPv4 address of that interface is used.  If either is
# unspecified, the largest local IP address will be used, excluding the
# phyint interfaces where pimd has been disabled.
#
# `time` after `rp-candidate` specifies how often to send the Cand-RP messages.
# Its default value should be 60 seconds. Use smaller value for faster
# convergence.
#
# `group-prefix` is/are the prefix(es) advertised if rp-candidate
#
# It is possible to set a static Rendez-Vous Point using the "rp-address"
# setting.  The argument can be either a unicast or a multicast address
# followed by an optional group address and optional masklen to that.
#
# New Cisco-like spt_threshold, notice rate in kbps!  Where `rate`
# specifies the minimum rate before the last hop router initiate a
# switch to the shortest path, `packets` is an alternative notation,
# `infinity` means to never switch, and `interval` specifies the
# interval for periodical testing of the threshold.  Currently,
# `interval` must be at least 5 (seconds)
#
# Interface defaults like preference/distance and metric must be set
# before the phyint section begins -- the .conf parser is not clever.
#default_source_preference	101  # smaller is better
#default_source_metric		1024 # smaller is better
#hello_interval			30

# The phyint settings currently *MUST BE* ordered after the default
# source preference and metric settings, but before everything else.

# By default, all non-loopback multicast capable interfaces are enabled.
# If you want to use loopback, set the interface multicast flag on it.
#phyint eth0 disable

# IGMP default query interval and querier timeout.  The latter should
# per RFC always be (robustness * interval) + (query-response / 2), for
# pimd this means: (3 * 12) + (10 / 2) = 41, we've rounded it up to
# honor the late Douglas Adams.  You can set it to a higher value, but
# it is not recommended to set it lower.
#igmp_query_interval  12
#igmp_querier_timeout 42

# Bigger value means  "higher" priority
bsr-candidate priority 5

# Smaller value means "higher" priority
rp-candidate time 30 priority 20

# Candidate for being RP of complete IPv4 multicast range
group-prefix 224.0.0.0 masklen 4

# Static rendez-vous point
#rp-address 192.168.10.1 224.0.0.0/4

# Switch to shortest-path tree after first packet, but only after 100 sec.
spt_threshold packets 0 interval 100
