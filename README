README for pimd, the PIM-SM v2 multicast daemon
===============================================

This is pimd, a lightweight, stand-alone PIM Sparse-Mode implementation
that may be freely distributed or deployed.  The project implements the
full PIM-SM specification (RFC 2362) with a few noted exceptions (see the
RELEASE.NOTES).

The software should compile and run on most UNIX varieties, including
FreeBSD, BSDI, NetBSD, SunOS, IRIX, Solaris 2.5, Solaris 2.6, and Linux.
It has, however, not been thoroughly tested on all these.

NOTE: If you have any questions, suggestions, bug reports, etc., do NOT
      send them to the PIM IETF Working Group mailing list!  Instead,
      contact the current maintainer, see the file AUTHORS.

IMPLEMENTATION NOTES FOR "SCOPED traffic"
-----------------------------------------
Contributed by Marian Stagarescu <marian@bile.cidera.com>

In order to minimize the search for matching groups the implementation is
limited to (and requires adequate testing):

Packets are stopped from being forwarded by installing a NULL outgoing
interface.  The user space pimd is not called any more for these packets
which are dropped by the kernel (nil oif) except for when we de-install
the route are re-create it (timer 3 minute).

This translates into adding the following call to the APPLY_SCOPE() macro
in pim/route.c:process_cache_miss():

   add_kernel_cache(mrtentry_ptr, mfc_source, group, MFC_MOVE_FORCE);
#ifdef SCOPED_ACL
   APPLY_SCOPE(group,mrtentry_ptr);
#endif
   k_chg_mfc(igmp_socket, mfc_source, group, iif, mrtentry_ptr->oifs,rp_addr);

where:

   #define APPLY_SCOPE(g,mp) {               \
       register vifi_t i ;                   \
           for (i = 0; i < numvifs; i++)     \
               if (scoped_addr(i, g))        \
                   (mp)->oifs = NULL;        \
   }

With scoped_addr() (as in mrouted) uses the VIF acl that was installed
via config scoped statements.

Files changed: config.c 
               route.c 

Note, I am not sure if the above filter needs to be installed when we
have the case of "the iif doesn't match"

---------------
Original README
---------------
  $Id: README,v 1.40 2003/03/05 19:55:36 pavlin Exp $

This is README for pimd, the PIM multicast daemon.

Check http://netweb.usc.edu/pim/pimd/ for lastest pimd version.

NOTE:
If you have any questions, suggestions, bug reports, etc.,
do NOT send them to the PIM IETF Working Group mailing list!
Instead, send them to the current maintainer:

Pavlin Ivanov Radoslavov
pavlin@catarina.usc.edu



http://netweb.usc.edu/pim/pimd/SUPPORTED PLATFORMS: FreeBSD, NetBSD, OpenBSD, Linux

(Note that I have only FreeBSD on my testbed, and I relay
exclusively on users feedbacks to make it working on other platforms).

AVAILABLE PIM KERNEL PATCHES: FreeBSD, NetBSD, OpenBSD
Check http://netweb.usc.edu/pim/pimd/pimkern-current/
or http://netweb.usc.edu/pim/pimd/pimkern-tmp/
for available kernel patches

WARNING WARNING WARNING:
XXX: this pimd release is unofficial, and by default will not work with the
*BSD patches in the pimkern-current directory; use the pimkern-tmp
patches instead or recompile pimd with PIM_OLD_KERNEL defined
(see the beginning of Makefile).

For GNU/Linux users, linux-2.1.103 and later has PIM-SMv2 kernel support,
but if your kernel is older than version 2.2.11 and 2.3.6, you need a
kernel patch-fix. Check the following file for details:
http//netweb.usc.edu/pim/pimd/pimkern-current/README.checksum

Existing old PIM kernel patches:
	SunOS-4.1.3, SGI, BSDI-3.0, BSDI-3.1

UNSUPPORTED PLATFORMS
---------------------
  - SGI: pimd may still be OK, but the available PIM-kernel patches
         may be obsolete
  - SunOS-4.1.3: pimd may still be OK, but the available PIM-kernel patches
         may be obsolete
  - Solaris-2.5.1 and 2.6: most of the pimd code was developed on
    Solaris-2.5.1, but the used kernel patches were Sun internal property,
    and were never released to the public.
  - BSDI: pimd may still be OK, but the available PIM-kernel patches
          may be obsolete

